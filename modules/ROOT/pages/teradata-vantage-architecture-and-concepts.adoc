= Teradata Vantage Architecture and Concepts
:experimental:
:page-author: Krutik Pathak
:page-email: krutik.pathak@teradata.com
:page-revdate: TBD
:description: Teradata Vantage Architecture and Concepts.
:keywords: data warehouses, teradata vantage architecture, teradata, vantage, Access Module Processors (AMP), Parsing Engines (PE), Massively Parallel Processing (MPP), Virtual Disk (Vdisks)
:tabs:
:dir: teradata-vantage-architecture-concepts

== Overview

This tutorial explains the underlying concepts of Teradata Vantage database architecture. 

Teradata Vantage is designed around a Massively Parallel Processing (MPP) architecture, which enables high-performance data processing and analytics. The major architectural components of Teradata Vantage include the Parsing Engine (PE), Message Passing Layer (MPL), Access Module Processors (AMPs), and Virtual Disks (Vdisks).


image::{dir}/teradata_architecture_major_components.png[Teradata Vantage Major Architectural Components, width=75%]

== Teradata Vantage Architecture Components
The Teradata Vantage architecture consists of the components below:

=== Parsing Engines (PE)
When a SQL query is run in Teradata, it first reaches the Parsing Engine. The functions of the Parsing Engine are:

* Manage individual user sessions (up to 120). 
* Parse and optimize the SQL queries. 
* Check if the user has required privileges against the objects used in the SQL query. 
* Check if the objects used in the SQL query exist. 
* Prepare the execution plan to execute the SQL query and pass it to the corresponding AMPs. 
* Receives the response from the AMPs and sends it back to the requesting client. 

=== Message Passing Layer (MPL)
The Message Passing Layer is a combination of the Parallel Database Extension (PDE) and BYNET Software. It enables communication between the Parsing Engine (PE) and the Access Module Processors (AMPs).  The primary function of MPL is to carry messages between the PE and the AMPs. 

=== BYNET 
BYNET is a system interconnect that enables component communication. The BYNET possesses high-speed logic that provides bi-directional broadcast, multicast, and point-to-point communication and merge functions. It performs three key functions: coordinating multi-AMP queries, reading data from multiple AMPs while maintaining sorting, and regulating message flow to prevent congestion and protect platform throughput.

=== Parallel Database Extension (PDE)
Parallel Database Extension (PDE) acts as an intermediary software layer positioned between the operating system and Teradata Database. It facilitates the parallelism that is responsible for the speed and linear scalability of the Teradata Database.  

=== Access Module Processor (AMP)
AMPs are responsible for data storage and retrieval. Each AMP is associated with a set of Virtual Disks (Vdisk) where the data is stored. Only the corresponding AMP can read/write data from the disks. The functions of AMP are:

* Access storage using Vantage’s file system Software 
* Lock management 
* Sorting rows 
* Aggregating columns 
* Join processing 
* Output conversion 
* Disk space management 
* Accounting 
* Recovering processing 

=== Virtual Disks (Vdisks)
This is the space owned by the AMP and is used to hold the user data (rows within tables). It maps to the physical space on the disk.

=== Node
A node, in the context of Teradata systems, represents an individual server that functions as a hardware platform for the database software. It serves as a processing unit where database operations are executed under the control of a single operating system.

=== Clique
A clique is a set of Teradata nodes that share a common set of disk arrays. 

== Teradata Vantage Architecture Concepts
The given below concepts are applicable to Teradata Vantage Architecture.

=== Linear Growth and Expandability 
Teradata is a linearly expandable RDBMS. As the workload and data volume increase, adding more hardware resources such as servers or nodes results in a proportional increase in performance and capacity. Linear Scalability allows for increased workload without decreased throughput. 

image::{dir}/performance_impact_of_adding_components.png[Performance Impact of Adding Components, width=75%]

=== Teradata Parallelism 
Teradata parallelism refers to the inherent ability of the Teradata Database to perform parallel processing of data and queries across multiple nodes or components simultaneously.

* Each Parsing Engine (PE) in Teradata has the capability to handle up to 120 sessions concurrently. 
* Each session is capable of handling multiple requests simultaneously. 
* The Message Passing Layer (MPL) in Teradata enables parallel handling of all message activity, including data redistribution for subsequent tasks. 
* All Access Module Processors (AMPs) in Teradata can collaborate in parallel to serve any incoming request. 
* Each AMP can work on multiple requests concurrently, allowing for efficient parallel processing.  

image::{dir}/teradata_parallelism.png[Teradata Parallelism, width=75%]


=== Teradata Retrieval Architecture
The key steps involved in Teradata Retrieval Architecture are:

* The Parsing Engine sends a request to retrieve one or more rows. 
* The Message Passing Layer activates the relevant AMP(s) for processing. 
* The AMP(s) concurrently locate and retrieve the desired row(s) through parallel access. 
* The Message Passing Layer returns the retrieved row(s) to the Parsing Engine. 
* The Parsing Engine then delivers the row(s) back to the requesting client application. 

image::{dir}/teradata_retrieval_architecture.png[Teradata Retrieval Architecture, width=75%]

=== Teradata Data Distribution
Teradata's MPP architecture requires an efficient means of distributing and retrieving data and does so using hash partitioning. This approach ensures scalable performance and efficient data access.

* Rows in the tables are automatically distributed evenly by hash partitioning. 
* The system achieves scalable performance through data distribution. 
* Distribution occurs in real-time as data is loaded, appended, or changed. 
* A hash map is defined and maintained by the system, consisting of 2**32 hash codes divided into 64K buckets distributed to AMPs. 
* The designated Prime Index column(s) are hashed to generate consistent hash codes for the same values. 
* No reorganization, repartitioning, or space management is required. 
* Each AMP typically contains rows from all tables, ensuring efficient data access and processing. 

image::{dir}/teradata_data_distribution.png[Teradata Data Distribution, width=75%]

== Conclusion 
In this QuickStart post, we covered the major architectural components such as the Parsing Engine (PE), Message Passing Layer (MPL), Access Module Processor (AMP), Virtual Disk (Vdisk), other architectural components such as BYNET, Parallel Database Extension (PDE), Node, Clique, and the essential concepts of Teradata Vantage such as Linear Growth and Expandability, Parallelism, Data Retrieval and Data Distribution. 

== Further Reading 
link:https://docs.teradata.com/r/xrmOxQlXa0ETFi5lPxHJaQ/IJCs6AQqeoQ35UimUkNRbA[Parsing Engine, window="_blank"]

link:https://docs.teradata.com/r/Database-Introduction/June-2020/Teradata-Database-Hardware-and-Software-Architecture/SMP-and-MPP-Platforms/The-BYNET[BYNET, window="_blank"]

link:https://www.teradata.com/Blogs/What-Is-the-BYNET-and-Why-Is-It-Important-to-Vantage[What is BYNET and Why is it Important to Vantage, window="_blank"]

link:https://docs.teradata.com/r/xrmOxQlXa0ETFi5lPxHJaQ/zy54TRdPqb_sHKx5WDtICw[Access Module Processor, window="_blank"]

link:https://docs.teradata.com/r/xrmOxQlXa0ETFi5lPxHJaQ/~3TI9MTqEelS40~mv1pltA[Parallel Database Extensions, window="_blank"]
