<script src="{{uiRootPath}}/js/site.js"></script>
<script src="{{uiRootPath}}/js/vendor/lunr.js"></script>
<script src="{{uiRootPath}}/js/vendor/search.js" id="search-script" data-base-path="{{or siteRootPath (or site.url siteRootUrl)}}" data-page-path="{{@root.page.url}}"></script>
<script async src="{{uiRootPath}}/../search-index.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/languages/powershell.min.js"></script>
<script>hljs.highlightAll();</script>
<script>
  // this script instruments elements to emit GTM events
  for (let e of document.getElementsByClassName("emits-gtm-events")) {
    e.addEventListener("click", function() {
      dataLayer.push({'event': e.id});
    });
  }

  function toggleFeedbackWidgets(elem) {
    feedback = elem.getAttribute('data-icon');
    currentState = elem.getAttribute('data-prefix');

    // if already clicked then exit
    if (currentState === 'fas') return;
    newState = 'fas';


    document.querySelectorAll(`svg[name="feedback-icon"][data-icon="${feedback}"]`).forEach(
      (e) => {
        e.setAttribute("data-prefix", newState);
      }
    );

    oppositeFeedback = (feedback === 'thumbs-up')? 'thumbs-down': 'thumbs-up';
    document.querySelectorAll(`svg[name="feedback-icon"][data-icon="${oppositeFeedback}"]`).forEach(
      (e) => {
        e.setAttribute("data-prefix", currentState);
      }
    );

    dataLayer.push({ 'event': feedback });
  }
</script>

